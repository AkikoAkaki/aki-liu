<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safari favicon showing white background on dark mode | Aki&#39;s Blog</title>
    
    <link rel="canonical" href="https://example.org/writing/safari-favicon/">
    
    
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Newsreader:ital,wght@1,400&display=swap" rel="stylesheet">

        
        
        <link rel="stylesheet" href="/css/style.84e2f7740ca7a869a7561d82e27df26e72ae785be8d4fb7839e667a1a6ca1480.css" integrity="sha256-hOL3dAynqGmnVh2C4n3ybnKueFvo1Pt4OeZnoabKFIA=">
        
        
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" crossorigin="anonymous"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>
        <script defer>
            document.addEventListener('DOMContentLoaded', function () {
                if (typeof renderMathInElement === 'function') {
                    renderMathInElement(document.body, {
                        delimiters: [
                            {left: '$$', right: '$$', display: true},
                            {left: '\\(', right: '\\)', display: false},
                            {left: '\\[', right: '\\]', display: true},
                            {left: '$', right: '$', display: false}
                        ],
                        throwOnError: false
                    });
                }
            });
        </script>
        
    <style>
        .nav-sub {
            display: flex;
            flex-direction: column;
            margin-left: 1.5rem;
            margin-top: 0.25rem;
        }
        .nav-link {
            font-family: var(--font-serif);
            font-style: italic;
            font-size: 1.25rem;
            color: var(--text-meta);
            transition: color 0.2s ease;
        }
        .sub-link {
            font-family: var(--font-serif);
            font-style: italic;
            font-size: 1.25rem;
            color: var(--text-meta);
            text-decoration: none;
            margin-bottom: 0.25rem;
            display: block;
            transition: color 0.2s ease;
        }
        .sub-link:hover {
            color: var(--text-color);
        }
        .sub-link.is-active {
            color: var(--text-color);
        }
    </style>
</head>
<body>
    
    
    
    
        
        
    
    
    <div class="site-container">
        <aside class="site-sidebar">
            <nav class="site-nav">
                <a href="/" class="nav-link ">
                    Index
                </a>
                
                
                
                <a href="/writing/" class="nav-link is-active">
                    Writing
                </a>
                
                
                <div class="nav-sub">
                    
                    
                    
                    
                    
                    
                        
                        <a href="/writing/text-lab/" class="sub-link ">Text Lab</a>
                    
                    
                    
                        
                        <a href="/writing/life/" class="sub-link ">Life</a>
                    
                    
                    
                        
                        <a href="/writing/tech/" class="sub-link is-active">Tech</a>
                    
                </div>
                
            </nav>
        </aside>
        <main class="site-main">
            
<article class="post-single">
    <header class="post-header">
        <h1 class="post-title">Safari favicon showing white background on dark mode</h1>
        <time class="post-date">2023/04/19</time>
    </header>

    <div class="post-content">
        <p>This happens as recently as Safari 16.4. It&rsquo;s because your favicon fails to meet contrast requirements.</p>
<p>I don&rsquo;t know what the requirements are, or how Safari calculates them, and I can’t find any official information online (beyond some discussion deciding that Safari should stop automatically adjusting colors for improved contrast in places like <code>::placeholder</code> and <code>::selection</code>). It’s definitely related to color contrast, though I didn’t see any consistent behavior by matching or exceeding AA/4.5:1 or AAA/7:1 requirements of the foreground color against both #000 and #282828 (Safari&rsquo;s default tabbar background in dark mode).</p>
<h3 id="solving">Solving</h3>
<p>You can fix it by changing the primary color of your favicon to be “brighter”. Decreasing white space or adding a border to the icon may also help.</p>
<h3 id="validating">Validating</h3>
<p>Safari has an agressive favicon cache that is not easy to clear. Here&rsquo;s how to forcefully refresh your website&rsquo;s favicon in Safari:</p>
<ul>
<li>Click the menu item &ldquo;Clear Caches&rdquo; under the Develop menu
<ul>
<li>If you don&rsquo;t see the Develop menu, enable it in Safari Preferences › Advanced</li>
</ul>
</li>
<li>Quit Safari</li>
<li>Delete everything in <code>~/Library/Safari/Favicon Cache</code>
<ul>
<li>Terminal users can run <code>rm -rf ~/Library/Safari/Favicon\ Cache</code></li>
</ul>
</li>
<li>Restart Safari</li>
<li>Visit your site</li>
</ul>

    </div>
</article>

            <footer class="site-footer">
                <div class="footer-left">© 2025 Aki Liu</div>
            </footer>
        </main>
        <aside class="site-sidebar-right">
            
    
    
        
        <aside class="post-toc">
            <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#solving">Solving</a></li>
        <li><a href="#validating">Validating</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </aside>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const tocLinks = document.querySelectorAll('.post-toc a');
                const headings = Array.from(document.querySelectorAll('.post-content h1, .post-content h2, .post-content h3, .post-content h4, .post-content h5, .post-content h6'))
                    .filter(h => h.id);
                
                if (tocLinks.length === 0 || headings.length === 0) return;

                let activeIndex = 0;

                const updateActive = () => {
                    
                    const threshold = window.innerHeight * 0.75;
                    
                    
                    let newIndex = 0;
                    for (let i = 0; i < headings.length; i++) {
                        if (headings[i].getBoundingClientRect().top <= threshold) {
                            newIndex = i;
                        } else {
                            break;
                        }
                    }

                    if (newIndex !== activeIndex) {
                        tocLinks[activeIndex]?.classList.remove('is-active');
                        activeIndex = newIndex;
                        tocLinks[activeIndex]?.classList.add('is-active');
                    }
                };

                
                updateActive();

                window.addEventListener('scroll', updateActive, { passive: true });
            });
        </script>
        
    

        </aside>
    </div>
</body>
</html>
